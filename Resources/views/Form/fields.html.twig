{#
The id on the row and the attribute data-row-id are important. They are used in the js code.
Same thing for all classes starting with jb_
#}

{% block jb_file_ajax_row %}
    <div id="{{ id }}_row" class="file-upload">
        {{- form_label(form) -}}
        <div class="alert alert-danger jb_result_error" style="display: none;"></div>
        {{- form_errors(form) -}}
        {{- form_widget(form) -}}
    </div>
{% endblock %}

{% block jb_file_ajax_widget %}
    <span class="fileinput-button">
        <span>{{ 'Import a file'|trans }}</span>
        <input
            class="jb_fileupload"
            type="file"
            name="{{ id }}_file"
            data-url="{{ oneup_uploader_endpoint(endpoint) }}"
            data-row-id="{{ id }}_row"
            data-use-crop="{{ use_crop ? "true" : "false" }}" />
    </span>
    <input type="hidden" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
    {% if display_link %}
        {% if file_history is not null %}
            <a class="jb_result_preview" href="{{ file_history_url }}"><span class="jb_result_name">{{ file_history.originalName }}</span></a>
        {% else %}
            <a class="jb_result_preview" href="#no-preview"><span class="jb_result_name"></span></a>
        {% endif %}
    {% endif %}
{% endblock %}

{% block jb_image_ajax_widget %}
    {% if file_history is not null %}
        <img class="jb_result_preview" src="{{ file_history_url }}" width="{{ img_width }}" />
    {% else %}
        <img class="jb_result_preview" src="{{ asset(default_image) }}" width="{{ img_width }}" />
    {% endif %}

    {{ block('jb_file_ajax_widget') }}
{% endblock %}

{% block jb_crop_image_ajax_widget %}
    <div class="jb_crop_upload">
        {{ block('jb_image_ajax_widget') }}
    </div>
    <div class="jb_crop_tool" style="display: none;">
        <img class="jb_crop_img" src="" {{ block('jb_crop_attributes') }} style="max-width: {{ max_width }}px; max-height: {{ max_height }}px;"/>
        <button class="jb_crop_confirm">{{ confirm_button_label|trans }}</button>
        {% if reset_button %}
            <button type="submit" class="jb_crop_reset">{{ reset_button_label|trans }}</button>
        {% endif %}
        <input type="hidden" class="jb_crop_field jb_crop_x" name="jb_fileuploader_crop[x]" value="" />
        <input type="hidden" class="jb_crop_field jb_crop_y" name="jb_fileuploader_crop[y]" value="" />
        <input type="hidden" class="jb_crop_field jb_crop_width" name="jb_fileuploader_crop[width]" value="" />
        <input type="hidden" class="jb_crop_field jb_crop_height" name="jb_fileuploader_crop[height]" value="" />
        <input type="hidden" class="jb_crop_field jb_crop_filename" name="jb_fileuploader_crop[filename]" value="" />
    </div>
{% endblock %}

{% block jb_crop_attributes -%}
    {% for key, option in crop_options %}
        data-{{ key }}="{{ option }}"
    {% endfor %}
    data-url="{{ jb_fileuploader_crop_endpoint(endpoint) }}"
{%- endblock %}